<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Tests - Pinpoint Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/jasmine-core/lib/jasmine-core/jasmine.css">
    <script src="https://unpkg.com/jasmine-core/lib/jasmine-core/jasmine.js"></script>
    <script src="https://unpkg.com/jasmine-core/lib/jasmine-core/jasmine-html.js"></script>
    <script src="https://unpkg.com/jasmine-core/lib/jasmine-core/boot0.js"></script>
    <script src="https://unpkg.com/jasmine-core/lib/jasmine-core/boot1.js"></script>
    <script src="utils.js"></script>
    <script>
    describe('PinpointUtils', function(){
      it('pxToNormalized converts center correctly', function(){
        const rect = { left: 100, top: 50, width: 800, height: 400 };
        const centerPx = { x: 100 + 400, y: 50 + 200 };
        const norm = PinpointUtils.pxToNormalized(centerPx, rect);
        expect(norm.x).toBeCloseTo(0.5, 6);
        expect(norm.y).toBeCloseTo(0.5, 6);
      });

      it('normalizedToPx returns pixel position inside rect', function(){
        const rect = { left: 10, top: 20, width: 200, height: 100 };
        const px = PinpointUtils.normalizedToPx({ x: 0.25, y: 0.5 }, rect);
        expect(px.x).toBeCloseTo(10 + 0.25*200, 6);
        expect(px.y).toBeCloseTo(20 + 0.5*100, 6);
      });
    });
    </script>
  </head>
  <body></body>
</html>
